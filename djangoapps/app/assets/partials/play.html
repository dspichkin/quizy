<div class="play">
    
    <div class="play_panel" style="
    height: 100%;
    width: 90%;
    display: inline-block;
    margin-top: -50px;">


        <div ng-if="model.play.current_page_index < model.play.lesson.pages.length">
            <div class="shadow" style="float:left;width: 65%;background-color: white;text-align: left;
    padding: 20px;min-height: 400px;position: relative;">

                <div style="font-size: 17px;font-weight: 500;">
                    Вопрос №{{model.play.lesson.pages[model.play.current_page_index].number}}
                </div>

                <div class="question_text"ng-bind-html="model.play.lesson.pages[model.play.current_page_index].text"></div>


                <div ng-if="model.play.lesson.pages[model.play.current_page_index].type == 'text'" class="variant_text" style="width: 100%;
    padding: 0px 20px 10px 20px;">
                    <md-input-container style="text-align: left;">
                        <label>Введите ответ</label>
                            <input class="variant_text" type="text" 
                            ng-model="model.play.attempt.answer_steps[model.play.current_page_index].text_answer"
                            ng-change="answer_ready(item.id)"
                            >
                        </md-input-container>
                </div>




                <div ng-if="model.play.lesson.pages[model.play.current_page_index].type == 'radiobox'" class="variant_radiobox">
                    <div class="radio_variants">
                        <md-radio-group ng-model="tempdata.radiobox_answer" ng-change="answer_ready()">
                            <md-radio-button ng-repeat="item in model.play.lesson.pages[model.play.current_page_index].variants"
                                               ng-value="item.id"
                                               aria-label="{{item.text}}" class="variant">
                                  <span style="margin: 0 0 0 15px;">{{item.text}}</span>
                            </md-radio-button>
                        </md-radio-group>
                    </div>
                </div>


                <div ng-if="model.play.lesson.pages[model.play.current_page_index].type == 'checkbox'" class="variant_checkbox">
                    <ul class="checkbox_variants">
                        <li ng-repeat="item in model.play.lesson.pages[model.play.current_page_index].variants" class="variant">
                            <div style="clear:both;">
                            <md-checkbox class="variant_text_checkbox" ng-model="item.answer" type="checkbox" aria-label="Checkbox" value="{{item.answer}}" 
                                ng-true-value="true"
                                ng-false-value="false"
                                ng-change="answer_ready()"
                                style="float: left;margin: 15px 0px 0px 0px;">
                                {{item.text}}
                            </md-checkbox>
                            </div>
                        </li>
                    </ul>
                </div>


                <div ng-if="model.play.lesson.pages[model.play.current_page_index].type == 'pairs'" class="variant_checkbox">

                    <div class="pairs_panel">
                        <div style="float:left;">
                            <div ng-repeat="variant in model.play.lesson.pages[model.play.current_page_index].variants" ng-if="variant.pair_type=='question'"
                                class="question_panel">
                                <div class="question_title">{{variant.text}}</div>
                                <div class="dropable question_dropable">
                                    <div drag class="dragable question_dragable" action="make_answer_for_pairs" data-id="{{variant.id}}">{{variant.text}}</div>
                                </div>

                            </div>
                        </div>
                        <div style="float:right;display:block;">

                            <div ng-repeat="variant in model.play.lesson.pages[model.play.current_page_index].variants" ng-if="variant.pair_type=='answer'" class="answer_panel">
                                <div class="dropable answer_dropable" data-id="{{variant.id}}"></div>
                                <div class="answer_title" style="">{{variant.text}}
                                </div>
                            </div>
                        </div>

                    </div>


                    
                </div>


                <div style="position: absolute;
                    bottom: 20px;
                    right: 20px;">

                    <div class="shadow btn-secondary btn-disabled" ng-if="!model.play.next_question">ПОДТВЕРДИТЕ ОТВЕТ
                    </div>
                    <div ripple class="shadow btn-secondary" ng-if="model.play.next_question"
                        ng-click="next_question($event)">ПОДТВЕРДИТЕ ОТВЕТ
                    </div>
                </div>
            </div>

            <div class="shadow" style="float: left;
                width: 25%;
                background-color: white;
                min-height: 300px;
                margin: 0 0 20px 20px;
                padding: 25px;
                text-align: left;">
                <p style="font-size: 12px;">Прохождение урока</p>
                <p style="font-size: 26px;font-weight: 500;">{{model.play.lesson.name}}</p>
                <p>{{model.play.lesson.description}}</p>
            </div>

        </div>
        <!-- вывод резултата -->
        <div class="shadow reflexy_panel" ng-if="model.play.current_page_index == model.play.lesson.pages.length">
            <h3>Номер попытки: {{model.play.attempt.number_of_attempt}}</h3>
            Результат: 
            <span ng-if="model.play.success == false">Не успешно</span>
            <span ng-if="model.play.success == true">Успешно</span>

            <ul>
                <li class="reflexy_step" ng-repeat="page in model.play.lesson.pages">
                    {{page.number}}
                    <span>
                        {{page.text | htmlToPlaintext | limitTo: 25 }}{{page.text.length > 25 ? '...' : ''}}
                    </span>
                    <span ng-if="get_answer_result(page.id)==false">Неверно</span>
                    <span ng-if="get_answer_result(page.id)==true">Верно</span>
                </li>
            </ul>

            <a href="/lessons/">Вернуться</a>
        </div>

    </div>
</div>